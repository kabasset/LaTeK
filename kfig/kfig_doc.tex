\documentclass[12pt,a4paper]{article}
\usepackage[latin1]{inputenc}
\usepackage[english]{babel}
%\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}

\usepackage{kfig}

%%% doc_cmd
\usepackage{framed}
\usepackage{xcolor}
\input{doc_cmd}


\author{Antoine Basset}
\title{\Kfig package documentation}


\begin{document}
\maketitle

\begin{figure}[h]
\begin{kfig}{3}
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw}
\kskip
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw}
\end{kfig}
\caption{A figure with identical images}
\end{figure}

\begin{figure}[h]
\begin{kfig*}{3,1,2}
  \rule{3\kimgh}{\kimgh} &
  \rule{1\kimgh}{\kimgh} &
  \rule{2\kimgh}{\kimgh}
\end{kfig*}
\kskip
\begin{kfig*}{1.5,4}
  \rule{1.5\kimgh}{\kimgh} &
  \rule{4\kimgh}{\kimgh}
\end{kfig*}
\caption{A figure with images of different shapes}
\end{figure}

\begin{figure}[h]
\begin{kfig*}{5,1.5}
  \rule{5\kimgh}{\kimgh} &
  The quick brown fox jumps over the lazy dog.
  Sphinx of black quartz, judge my vow.
\end{kfig*}
\caption{A figure with text}
\end{figure}

\pagebreak

\section{Identical images}

Environment {\emphverb|kfig|} is used to create figures made of several images of identical width.
By default, the figure width is exactly that of the page.

Syntax is as follows:
\begin{kcode}
\verb|\begin{|%
{\emphverb|kfig|}%
\verb|}[|%
\emph{figure width}%
\verb|]{|%
\emph{image count}%
\verb|}|%
\end{kcode}
where
\emph{figure width} is the total figure width, or \verb|\linewidth| by default,
and
\emph{image count} is the number of images per row.

Environment {\emphverb|kfig|} is based on \verb|tabular|, such that a figure of width 8~cm made of 4 images per row, and two rows, would be made this way:
\begin{kcode}
\begin{minipage}{.8\linewidth}
\verb|\begin{|%
{\emphverb|kfig|}%
\verb|}[8cm]{4}|%

\begin{tabular}{l@{\texttt{~\&~}}l@{\texttt{~\&~}}l@{\texttt{~\&~}}l}
\emph{image 1} &
\emph{image 2} &
\emph{image 3} &
\emph{image 4} \quad {\emphverb|\kskip|} \\
\emph{image 5} &
\emph{image 6} &
\emph{image 7} &
\emph{image 8}
\end{tabular}

\verb|\end{|%
{\emphverb|kfig|}%
\verb|}|%
\end{minipage}
\end{kcode}
where {\emphverb|\kskip|} creates a vertical space identical to horizontal spaces between images.
Their length is controlled by {\emphverb|\kimgsep|}.

Typically, \emph{image 1}, \emph{image 2}... are \verb|\includegraphics|'.
In this case, the image size is automatically adapted to the column width {\emphverb|\kimgw|} (=\verb|\linewidth| by the way).


\section{Images of different shapes}

Figures which contain images of varying shapes are built with environment {\emphverb|kfig*|} as follows:
\begin{kcode}
\verb|\begin{|%
{\emphverb|kfig*|}%
\verb|}[|%
\emph{figure width}%
\verb|]{|%
\emph{list of width/height image ratios}%
\verb|}|%
\end{kcode}
Here, images have different width but the same height: {\emphverb|\kimgh|}.

For example, to produce a figure containing a square image and a rectangle image of ratio 1.5, write:
\begin{kcode}
\begin{minipage}{.8\linewidth}
\verb|\begin{|%
{\emphverb|kfig*|}%
\verb|}{1,1.5}|%

\begin{tabular}{l@{\texttt{~\&~}}l}
\emph{square image} &
\emph{rectangle image}
\end{tabular}

\verb|\end{|%
{\emphverb|kfig*|}%
\verb|}|%
\end{minipage}
\end{kcode}

Again, when using \verb|\includegraphics| to insert images, the common height, {\emphverb|\kimgh|}, is automatically set.

\rmq{
The maximum number of columns in this environment is 8 for technical reasons.
This should be enough in 99\% of the cases.
If you are that 1\% left, help yourself!
}


\section{Text}

It is possible to fill the {\emphverb|kfig|} and {\emphverb|kfig*|} cells with anything else than images, e.g. text like in the last example.
The columns in environments {\emphverb|kfig|} and {\emphverb|kfig*|} are of type \verb|p|.


\section{Examples}

As an inspiration, here is the code of the three examples figures.

\begin{verbatim}
\begin{figure}[h]
\begin{kfig}{3}
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw}
\kskip
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw} &
  \rule{\kimgw}{.5\kimgw}
\end{kfig}
\caption{A figure with identical images}
\end{figure}

\begin{figure}[h]
\begin{kfig*}{3,1,2}
  \rule{3\kimgh}{\kimgh} &
  \rule{1\kimgh}{\kimgh} &
  \rule{2\kimgh}{\kimgh}
\end{kfig*}
\kskip
\begin{kfig*}{1.5,4}
  \rule{1.5\kimgh}{\kimgh} &
  \rule{4\kimgh}{\kimgh}
\end{kfig*}
\caption{A figure with images of different shapes}
\end{figure}

\begin{figure}[h]
\begin{kfig*}{5,1.5}
  \rule{5\kimgh}{\kimgh} &
  The quick brown fox jumps over the lazy dog.
  Sphinx of black quartz, judge my vow.
\end{kfig*}
\caption{A figure with text}
\end{figure}
\end{verbatim}


\end{document}